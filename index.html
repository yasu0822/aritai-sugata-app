
<!DOCTYPE html>
<!-- saved from url=(0138)https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/toolu_01J2e9mpQjMi7SpfdhwydLfB/aritai_sugata_tankyu_app_final.html -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ありたい姿探究アプリ</title>
    <link href="./index_files/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./index_files/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', sans-serif;
        }
        
        .glass-card {
            background: rgba(26, 26, 46, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .gold-accent {
            color: #d4af37;
        }
        
        .gold-border {
            border-color: #d4af37;
        }
        
        .gold-bg {
            background-color: #d4af37;
            color: #1a1a2e;
        }
        
        .gold-bg:hover {
            background-color: #b8941f;
        }
        
        .char-counter {
            font-size: 0.75rem;
            color: #d4af37;
        }
        
        .char-over {
            color: #ef4444;
        }
        
        .loading {
            display: none;
        }
        
        .loading.active {
            display: block;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse-gold {
            animation: pulseGold 2s infinite;
        }
        
        @keyframes pulseGold {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        textarea {
            background: rgba(26, 26, 46, 0.6);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #ffffff;
        }
        
        textarea:focus {
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }
        
        input {
            background: rgba(26, 26, 46, 0.6);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: #ffffff;
        }
        
        input:focus {
            border-color: #d4af37;
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }
    </style>
<style>
    .genspark-notice-dialog {
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 10001;
      align-items: center;
      justify-content: center;
    }

    .genspark-notice-content {
      background-color: white;
      border-radius: 8px;
      max-width: 600px;
      width: 90%;
      box-sizing: border-box;
      padding: 10px 30px 30px 30px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      font-size: 16px;
    }

    .genspark-notice-title {
      color: #000;
      font-family: Arial;
      font-size: 20px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%; 
    }

    .genspark-notice-list {
      margin: 24px 0;
      
      color: #606366;
      font-family: Arial;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 150%;
      padding-left: 12px;
    }

    .genspark-notice-list li {
      margin-bottom: 12px;
      list-style-type: disc;
    }

    .genspark-notice-list li a {
      color: #606366;
      text-decoration: underline;
    }

    .genspark-notice-checkbox {
      display: flex;
      align-items: center;
      margin-top: 20px;
      gap: 10px;

      color: #232425;

      font-family: Arial;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
    }

    .genspark-notice-actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
      
    .genspark-notice-ok {
      color: #232425;

      text-align: center;
      font-family: Arial;
      font-size: 16px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%; 

      cursor: pointer;
      display: flex;
      height: 40px;
      padding: 6px 14px;
      justify-content: center;
      align-items: center;
      gap: 10px;
      align-self: stretch;
      border-radius: 8px;
      border: 1px solid #000;
      box-sizing: border-box;
      width: 100%;
    }
  </style></head>
<body class="text-white">
    <!-- アクセスコード入力画面 -->
    <div id="accessCodeScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="glass-card rounded-xl p-8 max-w-md w-full">
            <div class="text-center mb-6">
                <i class="fas fa-key gold-accent text-4xl mb-4"></i>
                <h1 class="text-2xl font-bold gold-accent mb-2">ありたい姿探究アプリ</h1>
                <p class="text-gray-300 text-sm">イベント参加者専用</p>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2 gold-accent">アクセスコード</label>
                    <input type="password" id="accessCode" class="w-full px-4 py-3 rounded-lg focus:outline-none" placeholder="アクセスコードを入力してください">
                </div>
                
                <button onclick="checkAccessCode()" class="w-full gold-bg font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                    <i class="fas fa-unlock mr-2"></i>ログイン
                </button>
                
                <div id="accessError" class="text-red-400 text-sm text-center hidden">
                    アクセスコードが正しくありません
                </div>
            </div>
        </div>
    </div>

    <!-- メインアプリ画面 -->
    <div id="mainApp" class="hidden min-h-screen p-4">
        <div class="max-w-4xl mx-auto">
            <!-- ヘッダー -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold gold-accent mb-2">ありたい姿探究アプリ</h1>
                <p class="text-gray-300">あなたの心にワクワクする未来を描こう</p>
            </div>

            <!-- APIキー入力 -->
            <div id="apiKeySection" class="glass-card rounded-xl p-6 mb-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-cog gold-accent mr-3"></i>
                    <h2 class="text-xl font-semibold gold-accent">設定</h2>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">OpenAI APIキー</label>
                        <input type="password" id="apiKey" class="w-full px-4 py-2 rounded-lg focus:outline-none" placeholder="sk-...">
                        <p class="text-xs text-gray-400 mt-1">APIキーはブラウザに安全に保存されます</p>
                    </div>
                </div>
            </div>

            <!-- 入力セクション -->
            <div class="glass-card rounded-xl p-6 mb-6">
                <div class="flex items-center mb-4">
                    <i class="fas fa-edit gold-accent mr-3"></i>
                    <h2 class="text-xl font-semibold gold-accent">ワード・文章を入力</h2>
                </div>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium mb-2">あなたのありたい姿の要素となるワード・文章を改行で区切って入力してください（最大20個）</label>
                        <textarea id="wordsInput" rows="8" class="w-full px-4 py-3 rounded-lg focus:outline-none resize-none" placeholder="リーダーシップを発揮したい
チームメンバーを大切にする
新しいことに挑戦する勇気
..."></textarea>
                        <div class="flex justify-between items-center mt-2 text-xs">
                            <div id="wordCount" class="char-counter">0個のワード・文章</div>
                            <div id="charCountDisplay" class="char-counter"></div>
                        </div>
                    </div>
                    
                    <button onclick="analyzeVision()" id="analyzeBtn" class="w-full gold-bg font-semibold py-3 px-6 rounded-lg transition-colors duration-200">
                        <i class="fas fa-compass mr-2"></i>ありたい姿を探究する
                    </button>
                </div>
            </div>

            <!-- ローディング -->
            <div id="loading" class="loading text-center py-8">
                <div class="pulse-gold">
                    <i class="fas fa-spinner fa-spin gold-accent text-3xl mb-4"></i>
                    <p class="gold-accent">あなただけのありたい姿を分析中...</p>
                </div>
            </div>

            <!-- 結果表示 -->
            <div id="results" class="hidden space-y-6">
                <!-- ありたい姿 -->
                <div class="glass-card rounded-xl p-6 fade-in">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-star gold-accent mr-3"></i>
                        <h2 class="text-xl font-semibold gold-accent">あなたのありたい姿</h2>
                    </div>
                    <div id="visionResult" class="text-gray-100 leading-relaxed"></div>
                </div>

                <!-- 行動案 -->
                <div class="glass-card rounded-xl p-6 fade-in">
                    <div class="flex items-center mb-4">
                        <i class="fas fa-rocket gold-accent mr-3"></i>
                        <h2 class="text-xl font-semibold gold-accent">ワクワク行動案</h2>
                    </div>
                    <div id="actionsResult" class="space-y-4"></div>
                </div>
            </div>

            <!-- エラー表示 -->
            <div id="errorMessage" class="hidden glass-card rounded-xl p-6 border-red-500 bg-red-900 bg-opacity-30">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-triangle text-red-400 mr-3"></i>
                    <span class="text-red-100">分析中にエラーが発生しました。APIキーを確認するか、時間をおいてトライしてください。</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ===== アクセスコード設定 =====
        // 各イベントごとにここのコードを変更してください
        const ACCESS_CODES = {
            'EVENT2025': '2025年7月16日イベント',
            'VISION001': 'テスト用コード',
            'TANKYUU01': '探究イベント1回目'
        };

        // ===== アクセスコード機能 =====
        function checkAccessCode() {
            const inputCode = document.getElementById('accessCode').value.trim();
            const errorDiv = document.getElementById('accessError');
            
            if (ACCESS_CODES[inputCode]) {
                document.getElementById('accessCodeScreen').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                loadSettings();
            } else {
                errorDiv.classList.remove('hidden');
                setTimeout(() => {
                    errorDiv.classList.add('hidden');
                }, 3000);
            }
        }

        // Enterキーでログイン
        document.getElementById('accessCode').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAccessCode();
            }
        });

        // ===== メイン機能 =====
        function loadSettings() {
            const savedApiKey = localStorage.getItem('openai_api_key');
            if (savedApiKey) {
                document.getElementById('apiKey').value = savedApiKey;
            }
        }

        // 文字数カウンター
        document.getElementById('wordsInput').addEventListener('input', function() {
            const lines = this.value.split('\n').filter(line => line.trim() !== '');
            const wordCount = lines.length;
            document.getElementById('wordCount').textContent = `${wordCount}個のワード・文章`;
            
            // 各行の文字数チェック
            let charCountText = '';
            let hasOverLimit = false;
            
            lines.forEach((line, index) => {
                const charCount = line.trim().length;
                if (charCount > 100) {
                    hasOverLimit = true;
                    charCountText += `${index + 1}行目: ${charCount}文字（制限超過） `;
                }
            });
            
            if (hasOverLimit) {
                document.getElementById('charCountDisplay').textContent = charCountText;
                document.getElementById('charCountDisplay').classList.add('char-over');
            } else {
                document.getElementById('charCountDisplay').textContent = '各行100文字以内';
                document.getElementById('charCountDisplay').classList.remove('char-over');
            }
        });

        async function analyzeVision() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const wordsInput = document.getElementById('wordsInput').value.trim();
            
            if (!apiKey) {
                alert('OpenAI APIキーを入力してください。');
                return;
            }
            
            if (!wordsInput) {
                alert('ワード・文章を入力してください。');
                return;
            }
            
            // APIキーを保存
            localStorage.setItem('openai_api_key', apiKey);
            
            // 入力チェック
            const lines = wordsInput.split('\n').filter(line => line.trim() !== '');
            if (lines.length > 20) {
                alert('ワード・文章は最大20個までです。');
                return;
            }
            
            // 文字数チェック
            const overLimitLines = lines.filter(line => line.trim().length > 100);
            if (overLimitLines.length > 0) {
                alert('各行は100文字以内で入力してください。');
                return;
            }
            
            // UI更新
            document.getElementById('loading').classList.add('active');
            document.getElementById('results').classList.add('hidden');
            document.getElementById('errorMessage').classList.add('hidden');
            document.getElementById('analyzeBtn').disabled = true;
            
            try {
                const prompt = `
あなたは百戦錬磨のメンターです。

入力されたワード・文章を深く分析し、そこに秘められた可能性を見つけ出し、
ユーザーが心からワクワクして「これやってみたい！」と思える魅力的な提案をしてください。

入力されたワード・文章：
${wordsInput}

以下の形式で、探究心をくすぐる魅力的な表現で出力してください：

ありたい姿：[夢と希望に満ちた魅力的な15-25文字表現]

解説：[ワクワクする具体的シーンを含む100-150文字の描写]

行動案：
1. [楽しみながら実践できる具体的行動]
2. [発見や成長を感じられる具体的行動]
3. [仲間と一緒に取り組める具体的行動]

※入力ワードをそのまま使わず、その奥にある本質的な魅力を表現すること
※ユーザーが内発的にやりたくなるような表現を心がけること
※行動案は時期・時間・場所・方法・頻度を含む超具体的な内容とすること
`;

                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        max_tokens: 1000,
                        temperature: 0.8
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                const result = data.choices[0].message.content;
                
                displayResults(result);
                
            } catch (error) {
                console.error('Error:', error);
                document.getElementById('errorMessage').classList.remove('hidden');
            } finally {
                document.getElementById('loading').classList.remove('active');
                document.getElementById('analyzeBtn').disabled = false;
            }
        }

        function displayResults(result) {
            // 結果を解析
            const lines = result.split('\n').filter(line => line.trim() !== '');
            
            let visionTitle = '';
            let visionDescription = '';
            let actions = [];
            
            let currentSection = '';
            
            for (let line of lines) {
                line = line.trim();
                
                if (line.startsWith('ありたい姿：')) {
                    visionTitle = line.replace('ありたい姿：', '').trim();
                    currentSection = 'vision';
                } else if (line.startsWith('解説：')) {
                    visionDescription = line.replace('解説：', '').trim();
                    currentSection = 'description';
                } else if (line.startsWith('行動案：')) {
                    currentSection = 'actions';
                } else if (line.match(/^\d+\.\s/)) {
                    actions.push(line.replace(/^\d+\.\s/, ''));
                } else if (currentSection === 'description' && line) {
                    visionDescription += line;
                } else if (currentSection === 'actions' && line) {
                    actions.push(line);
                }
            }
            
            // ありたい姿の表示
            const visionHtml = `
                <div class="mb-4">
                    <h3 class="text-2xl font-bold gold-accent mb-3">${visionTitle}</h3>
                    <p class="text-gray-100 leading-relaxed text-lg">${visionDescription}</p>
                </div>
            `;
            document.getElementById('visionResult').innerHTML = visionHtml;
            
            // 行動案の表示
            const actionsHtml = actions.map((action, index) => `
                <div class="flex items-start space-x-4 p-4 rounded-lg bg-opacity-30 bg-gray-800 border-l-4 gold-border">
                    <div class="flex-shrink-0">
                        <span class="inline-flex items-center justify-center w-8 h-8 gold-bg rounded-full text-sm font-bold">${index + 1}</span>
                    </div>
                    <div class="flex-1">
                        <p class="text-gray-100 leading-relaxed">${action}</p>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('actionsResult').innerHTML = actionsHtml;
            document.getElementById('results').classList.remove('hidden');
            
            // 結果セクションまでスクロール
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        }
    </script>


    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDiqbmz655yF9syAf%2Fxc%2Bof%2BgT6z2fldZvibZPPJhot9TULlU6WLEZTJ0nSC61yrd%2BOh6uiWODiRy%2Fx%2F%2BmuCOhA6nEUmd1nICCl50iM9AsGR4y61KcWLQMkSHOv0Ek0sQ6QpulDqVYNZ7qtNw%2Fb5oIQHkFd9zvbjsq7rmcY1Jk6EfKmkT0BXVJqb8n4Otb72W7Ns2EDCkDQfUBYDfA0DE5qJbRxxGqyI%2FJOpf4HKX2CSkdJ5V3ycV5GOJakSwDxkPf6sKIoMXTuAkHH7tMy1YFf1ucI9RRjWBT9Fo0Wp9DuoH48t64MydH%2Bmdbwb4csAE8mECFV621B58ZMkxV9BPJklrmhpXxvcx2KA1xdtV41ocHXFRQma4S5Jjj6xntb2vlkz%2BMf%2BTBU3WBeEp01jMeLZ5QTxzOOXK3BCewZC7eT2giQs9gEnt9%2B41m9%2FGceoKl4U8twDdZZqsUYQEpn1BGeFjA%2Fg9uwZqjIs0eLPIhg8ET9oq2mgDcQShWTPzsCI2HZbp9W9hvsctWz8dF1CkaFE%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDiqbmz655yF9syAf/xc+of+gT6z2fldZvibZPPJhot9TULlU6WLEZTJ0nSC61yrd+Oh6uiWODiRy/x/+muCOhA6nEUmd1nICCl50iM9AsGR4y61KcWLQMkSHOv0Ek0sQ6QpulDqVYNZ7qtNw/b5oIQHkFd9zvbjsq7rmcY1Jk6EfKmkT0BXVJqb8n4Otb72W7Ns2EDCkDQfUBYDfA0DE5qJbRxxGqyI/JOpf4HKX2CSkdJ5V3ycV5GOJakSwDxkPf6sKIoMXTuAkHH7tMy1YFf1ucI9RRjWBT9Fo0Wp9DuoH48t64MydH+mdbwb4csAE8mECFV621B58ZMkxV9BPJklrmhpXxvcx2KA1xdtV41ocHXFRQma4S5Jjj6xntb2vlkz+Mf+TBU3WBeEp01jMeLZ5QTxzOOXK3BCewZC7eT2giQs9gEnt9+41m9/GceoKl4U8twDdZZqsUYQEpn1BGeFjA/g9uwZqjIs0eLPIhg8ET9oq2mgDcQShWTPzsCI2HZbp9W9hvsctWz8dF1CkaFE=";
    </script>
    
    <script id="html_notice_dialog_script" src="./index_files/notice_dialog.js.ダウンロード"></script>
    </body></html>
