<!DOCTYPE html>
<!-- saved from url=(0141)https://gensparkpublicblob.blob.core.windows.net/user-upload-image/page/toolu_01XdJ6jwbHSuNAuSfSk99Es8/aritai_sugata_tankyu_app_exciting.html -->
<html lang="ja"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ありたい姿探究アプリ</title>
    <link href="./ありたい姿探究アプリ_files/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="./ありたい姿探究アプリ_files/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            font-family: 'Hiragino Sans', 'Yu Gothic', 'Meiryo', sans-serif;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .gold-accent {
            color: #d4af37;
        }
        
        .input-field {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: white;
            padding: 12px;
            width: 100%;
            resize: vertical;
            min-height: 120px;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #d4af37;
            box-shadow: 0 0 0 2px rgba(212, 175, 55, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(45deg, #d4af37, #f4d03f);
            color: #1a1a2e;
            font-weight: bold;
            padding: 12px 32px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(212, 175, 55, 0.3);
        }
        
        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .result-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            padding: 24px;
            margin-top: 16px;
            animation: fadeInUp 0.6s ease;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .loading-spinner {
            border: 3px solid rgba(212, 175, 55, 0.3);
            border-top: 3px solid #d4af37;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .char-counter {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            text-align: right;
            margin-top: 4px;
        }
        
        .char-counter.warning {
            color: #ff6b6b;
        }
        
        .error-message {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            color: #ff6b6b;
            padding: 12px;
            border-radius: 8px;
            margin-top: 16px;
        }
        
        .vision-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #d4af37;
            margin-bottom: 12px;
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 8px;
        }
        
        .vision-content {
            color: white;
            line-height: 1.7;
            margin-bottom: 16px;
        }
        
        .action-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #d4af37;
            padding: 16px;
            margin-bottom: 12px;
            border-radius: 0 8px 8px 0;
            color: white;
            line-height: 1.6;
        }
    </style>
<style>
    .genspark-notice-dialog {
      display: flex;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 10001;
      align-items: center;
      justify-content: center;
    }

    .genspark-notice-content {
      background-color: white;
      border-radius: 8px;
      max-width: 600px;
      width: 90%;
      box-sizing: border-box;
      padding: 10px 30px 30px 30px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      font-size: 16px;
    }

    .genspark-notice-title {
      color: #000;
      font-family: Arial;
      font-size: 20px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%; 
    }

    .genspark-notice-list {
      margin: 24px 0;
      
      color: #606366;
      font-family: Arial;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: 150%;
      padding-left: 12px;
    }

    .genspark-notice-list li {
      margin-bottom: 12px;
      list-style-type: disc;
    }

    .genspark-notice-list li a {
      color: #606366;
      text-decoration: underline;
    }

    .genspark-notice-checkbox {
      display: flex;
      align-items: center;
      margin-top: 20px;
      gap: 10px;

      color: #232425;

      font-family: Arial;
      font-size: 14px;
      font-style: normal;
      font-weight: 400;
      line-height: normal;
    }

    .genspark-notice-actions {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
      
    .genspark-notice-ok {
      color: #232425;

      text-align: center;
      font-family: Arial;
      font-size: 16px;
      font-style: normal;
      font-weight: 700;
      line-height: 150%; 

      cursor: pointer;
      display: flex;
      height: 40px;
      padding: 6px 14px;
      justify-content: center;
      align-items: center;
      gap: 10px;
      align-self: stretch;
      border-radius: 8px;
      border: 1px solid #000;
      box-sizing: border-box;
      width: 100%;
    }
  </style></head>
<body class="text-white">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- ヘッダー -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">
                <span class="gold-accent">ありたい姿</span>探究アプリ
            </h1>
            <p class="text-lg text-gray-300 max-w-2xl mx-auto">
                あなただけの理想の未来を発見し、ワクワクする行動プランを見つけましょう
            </p>
        </div>

        <!-- メインカード -->
        <div class="glass-card p-8 mb-8">
            <!-- APIキー設定 -->
            <div class="mb-8">
                <label class="block text-sm font-medium mb-2 gold-accent">
                    <i class="fas fa-key mr-2"></i>OpenAI APIキー
                </label>
                <input type="password" id="apiKey" class="input-field" placeholder="sk-..." style="min-height: 40px;">
                <p class="text-xs text-gray-400 mt-2">
                    APIキーはブラウザに安全に保存され、外部に送信されることはありません
                </p>
            </div>

            <!-- ワード入力 -->
            <div class="mb-8">
                <label class="block text-sm font-medium mb-2 gold-accent">
                    <i class="fas fa-lightbulb mr-2"></i>あなたのワード・文章を入力してください
                </label>
                <textarea id="inputWords" class="input-field" placeholder="リーダーシップを発揮したい
チームメンバーを大切にする
新しいことに挑戦する勇気
学び続ける姿勢

（1行につき100文字まで、改行で区切ってください）" maxlength="2000"></textarea>
                <div id="charCounter" class="char-counter">0 / 2000文字</div>
                <p class="text-xs text-gray-400 mt-2">
                    あなたの価値観、大切にしたいこと、なりたい姿などを自由に入力してください
                </p>
            </div>

            <!-- 分析ボタン -->
            <div class="text-center">
                <button id="analyzeBtn" class="btn-primary text-lg">
                    <i class="fas fa-search mr-2"></i>ありたい姿を探究する
                </button>
            </div>

            <!-- ローディング -->
            <div id="loading" class="hidden text-center mt-8">
                <div class="loading-spinner"></div>
                <p class="mt-4 text-gray-300">あなたの未来を描いています...</p>
            </div>

            <!-- エラーメッセージ -->
            <div id="errorMessage" class="error-message hidden">
                <i class="fas fa-exclamation-triangle mr-2"></i>
                <span id="errorText">分析中にエラーが発生しました。</span>
            </div>
        </div>

        <!-- 結果表示 -->
        <div id="results" class="hidden">
            <!-- ありたい姿 -->
            <div class="result-card">
                <div class="vision-title">
                    <i class="fas fa-star mr-2"></i>あなたのありたい姿
                </div>
                <div id="visionResult" class="vision-content"></div>
            </div>

            <!-- 行動案 -->
            <div class="result-card">
                <div class="vision-title">
                    <i class="fas fa-rocket mr-2"></i>ワクワクする行動プラン
                </div>
                <div id="actionResult"></div>
            </div>
        </div>
    </div>

    <script>
        // 文字カウンター
        const inputWords = document.getElementById('inputWords');
        const charCounter = document.getElementById('charCounter');
        
        inputWords.addEventListener('input', function() {
            const length = this.value.length;
            charCounter.textContent = `${length} / 2000文字`;
            
            if (length > 1800) {
                charCounter.classList.add('warning');
            } else {
                charCounter.classList.remove('warning');
            }
            
            // 行ごとの文字数チェック
            const lines = this.value.split('\n');
            let hasLongLine = false;
            lines.forEach(line => {
                if (line.length > 100) {
                    hasLongLine = true;
                }
            });
            
            if (hasLongLine) {
                charCounter.textContent += ' ⚠️ 1行100文字を超えています';
                charCounter.classList.add('warning');
            }
        });

        // APIキーの保存と読み込み
        function saveApiKey(key) {
            localStorage.setItem('openai_api_key', key);
        }
        
        function loadApiKey() {
            return localStorage.getItem('openai_api_key') || '';
        }
        
        // ページ読み込み時にAPIキーを復元
        document.addEventListener('DOMContentLoaded', function() {
            const apiKeyInput = document.getElementById('apiKey');
            apiKeyInput.value = loadApiKey();
        });

        // 分析実行
        document.getElementById('analyzeBtn').addEventListener('click', async function() {
            const apiKey = document.getElementById('apiKey').value.trim();
            const words = document.getElementById('inputWords').value.trim();
            
            // バリデーション
            if (!apiKey) {
                showError('OpenAI APIキーを入力してください。');
                return;
            }
            
            if (!words) {
                showError('分析したいワード・文章を入力してください。');
                return;
            }
            
            // APIキーを保存
            saveApiKey(apiKey);
            
            // UIの状態変更
            showLoading(true);
            hideError();
            hideResults();
            
            try {
                const result = await analyzeVision(apiKey, words);
                displayResults(result);
            } catch (error) {
                console.error('分析エラー:', error);
                if (error.message.includes('rate_limit')) {
                    showError('利用制限に達しました。しばらく時間をおいてから再試行してください。');
                } else if (error.message.includes('invalid_api_key')) {
                    showError('APIキーを確認するか、時間をおいてトライしてください。');
                } else {
                    showError('分析中にエラーが発生しました。APIキーを確認するか、時間をおいてから再試行してください。');
                }
            } finally {
                showLoading(false);
            }
        });

        // OpenAI API呼び出し
        async function analyzeVision(apiKey, inputWords) {
            const prompt = `
あなたは人生の可能性を最大限に引き出す、情熱的なライフコーチです。

以下のワード・文章から、その人が心からワクワクし、「これは本当の自分らしい生き方だ！」と感じられる魅力的な未来像と、楽しみながら実践できる行動プランを提案してください。

入力されたワード・文章：
${inputWords}

重要な指針：
- 入力されたワードをそのまま羅列するのではなく、その背景にある本当の想いや価値観を読み取ってください
- 「やってみたい！」「面白そう！」と心から思える魅力的な表現を使ってください
- 夢と希望に満ちた、ワクワクする未来像を描いてください
- 行動プランは楽しく、成長実感が得られるものにしてください

以下の形式で出力してください：

ありたい姿：[15-25文字の魅力的でワクワクする表現]

解説：[100-150文字の、夢と希望に満ちた具体的な未来の描写]

行動プラン：
1. [楽しみながら実践できる具体的で魅力的な行動]
2. [楽しみながら実践できる具体的で魅力的な行動]
3. [楽しみながら実践できる具体的で魅力的な行動]

※行動プランは「楽しそう！」「成長できそう！」と感じられる内容で、時期・方法・頻度を含めて具体的に記述してください
`;

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: 'gpt-3.5-turbo',
                    messages: [
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    max_tokens: 1000,
                    temperature: 0.8
                })
            });

            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                if (response.status === 429) {
                    throw new Error('rate_limit');
                } else if (response.status === 401) {
                    throw new Error('invalid_api_key');
                } else {
                    throw new Error(`API Error: ${response.status} ${errorData.error?.message || 'Unknown error'}`);
                }
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        // 結果の解析と表示
        function displayResults(content) {
            try {
                // ありたい姿の抽出
                const visionMatch = content.match(/ありたい姿：(.+)/);
                const visionTitle = visionMatch ? visionMatch[1].trim() : '未来のあなた';
                
                // 解説の抽出
                const explanationMatch = content.match(/解説：\s*([\s\S]+?)(?=行動プラン：)/);
                const explanation = explanationMatch ? explanationMatch[1].trim() : '素晴らしい未来が待っています。';
                
                // 行動プランの抽出
                const actionMatches = content.match(/行動プラン：\s*([\s\S]+)/);
                let actions = [];
                if (actionMatches) {
                    const actionText = actionMatches[1];
                    const actionLines = actionText.split('\n').filter(line => line.trim().match(/^\d+\./));
                    actions = actionLines.map(line => line.replace(/^\d+\.\s*/, '').trim());
                }
                
                // 結果を表示
                document.getElementById('visionResult').innerHTML = `
                    <div style="font-size: 1.3em; font-weight: bold; color: #d4af37; margin-bottom: 16px;">
                        ${visionTitle}
                    </div>
                    <div style="line-height: 1.8; color: #e8e8e8;">
                        ${explanation}
                    </div>
                `;
                
                let actionHtml = '';
                actions.forEach((action, index) => {
                    if (action) {
                        actionHtml += `
                            <div class="action-item">
                                <div style="font-weight: bold; color: #d4af37; margin-bottom: 8px;">
                                    <i class="fas fa-play-circle mr-2"></i>アクション ${index + 1}
                                </div>
                                <div>${action}</div>
                            </div>
                        `;
                    }
                });
                
                document.getElementById('actionResult').innerHTML = actionHtml;
                
                showResults();
                
            } catch (error) {
                console.error('結果の解析エラー:', error);
                showError('結果の解析中にエラーが発生しました。再試行してください。');
            }
        }

        // UI制御関数
        function showLoading(show) {
            const loading = document.getElementById('loading');
            const btn = document.getElementById('analyzeBtn');
            
            if (show) {
                loading.classList.remove('hidden');
                btn.disabled = true;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>分析中...';
            } else {
                loading.classList.add('hidden');
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-search mr-2"></i>ありたい姿を探究する';
            }
        }
        
        function showError(message) {
            const errorDiv = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            errorDiv.classList.remove('hidden');
        }
        
        function hideError() {
            document.getElementById('errorMessage').classList.add('hidden');
        }
        
        function showResults() {
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function hideResults() {
            document.getElementById('results').classList.add('hidden');
        }
    </script>


    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDs%2F8%2BZ3UjYrTWGI9NVfCcfu99OLMzSP8s%2BcFGZgqzkMaE8hzyu5iNjGCf5MiLHTBBOmaHTBXMklO6CAAcu5KK5BvPa7obrwUSpLrAnGERpKTULcPM4goIaISjSM29s6rA5s9CcWMi7V%2F%2BXf9E6DQhkFe3Nb0eTDRjqhdjyTjmy3bW3F0GvlAAHiZ14RAUYouEx8cwyRwjdXawkNuIQHddbxHF0F3NQSb7wOrH6tZh3sB%2B%2B1MFzsThEzsok0X%2FIEv8UxYOl9NcjB18g9hQvq47qTfYLY9JVhnilhRC2KqgYL334tuFBwJz96f6FYGtl7UlaWn9BcyXo39aacWc8hThHcbMKEG7O2cqk7oopxGQ7vrij0yIAR1aLPs%2BT6CiaLT32pweQd7lHL4pbtw%2BIfTBYDhsKA7PwDyp2aMWQzdBtgyosoZ0MkklstIicyIjnRcSp6qPMIEmcX7pdsuK%2F%2BmSgf9hxOjfNVdY0xQ5I7lIA0uCy0dDUWGNDhdWlirv4itDbRzme3mYGzok3hs%2FsMFt%2FA%3D";
        window.__genspark_locale = "ja-JP";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDs/8+Z3UjYrTWGI9NVfCcfu99OLMzSP8s+cFGZgqzkMaE8hzyu5iNjGCf5MiLHTBBOmaHTBXMklO6CAAcu5KK5BvPa7obrwUSpLrAnGERpKTULcPM4goIaISjSM29s6rA5s9CcWMi7V/+Xf9E6DQhkFe3Nb0eTDRjqhdjyTjmy3bW3F0GvlAAHiZ14RAUYouEx8cwyRwjdXawkNuIQHddbxHF0F3NQSb7wOrH6tZh3sB++1MFzsThEzsok0X/IEv8UxYOl9NcjB18g9hQvq47qTfYLY9JVhnilhRC2KqgYL334tuFBwJz96f6FYGtl7UlaWn9BcyXo39aacWc8hThHcbMKEG7O2cqk7oopxGQ7vrij0yIAR1aLPs+T6CiaLT32pweQd7lHL4pbtw+IfTBYDhsKA7PwDyp2aMWQzdBtgyosoZ0MkklstIicyIjnRcSp6qPMIEmcX7pdsuK/+mSgf9hxOjfNVdY0xQ5I7lIA0uCy0dDUWGNDhdWlirv4itDbRzme3mYGzok3hs/sMFt/A=";
    </script>
    
    <script id="html_notice_dialog_script" src="./ありたい姿探究アプリ_files/notice_dialog.js.ダウンロード"></script>
    </body></html>